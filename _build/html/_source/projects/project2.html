

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Case 2: Load Balancer as a service &mdash; VJTICloud v0.01 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="VJTICloud v0.01 documentation" href="../../index.html"/>
        <link rel="up" title="Case Studies" href="../projects.html"/>
        <link rel="next" title="Case 3: Unix Lab" href="project3.html"/>
        <link rel="prev" title="Case 1: Virtical scale-up and scale-down VM resources" href="project1.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> VJTICloud
          

          
            
            <img src="../../_static/logo.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                v0.01
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation_guide.html">Installation Guide..</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin_guide.html">Administrator Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide.html">User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../projects.html">Case Studies</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="project1.html">Case 1: Virtical scale-up and scale-down VM resources</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Case 2: Load Balancer as a service</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configure-instances">Configure instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configure-load-balancer">Configure Load balancer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-a-health-monitor">Add a Health Monitor</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="project3.html">Case 3: Unix Lab</a></li>
<li class="toctree-l2"><a class="reference internal" href="project4.html">Case 4: Proposed architecture for VJTICloud in production</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../things_you_need_to_know.html">Things you need to know!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentation.html">Final Demonstration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">VJTICloud</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../projects.html">Case Studies</a> &raquo;</li>
      
    <li>Case 2: Load Balancer as a service</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="../../_sources/_source/projects/project2.txt" rel="nofollow"> View page source</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="case-2-load-balancer-as-a-service">
<h1>Case 2: Load Balancer as a service<a class="headerlink" href="#case-2-load-balancer-as-a-service" title="Permalink to this headline">¶</a></h1>
<p>A load balancer is a device that acts as a reverse proxy and distributes network or application traffic across a number of servers. Load balancers are used to increase capacity (concurrent users) and reliability of applications.</p>
<img alt="../../_images/lbaas.png" class="align-center" src="../../_images/lbaas.png" />
<div class="section" id="configure-instances">
<h2>Configure instances<a class="headerlink" href="#configure-instances" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first"><a class="reference internal" href="../user_guide/launch_instance.html#create-network"><em>Create Network, Subnet and router</em></a></p>
</li>
<li><p class="first"><a class="reference internal" href="../user_guide/launch_instance.html#create-security-group"><em>Create security group &amp; configure the rules</em></a></p>
</li>
<li><p class="first">Add rules for <tt class="docutils literal"><span class="pre">SSH</span></tt>, <tt class="docutils literal"><span class="pre">PING</span></tt>, <tt class="docutils literal"><span class="pre">HTTP</span></tt></p>
</li>
<li><p class="first"><a class="reference internal" href="../user_guide/launch_instance.html#create-key-pair"><em>Create key-pair</em></a> (optional)</p>
</li>
<li><p class="first"><a class="reference internal" href="../user_guide/launch_instance.html#launch-an-instance"><em>Launch an instance</em></a> with centos-7 image e.g. server-1</p>
</li>
<li><p class="first">Launch two more instances e.g. server-2, server-3</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can launch as many instances as you want</p>
</div>
</li>
<li><p class="first">Assign floating-ip to each instance</p>
</li>
<li><p class="first">Your dashboard will look like this</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/lbaas_instances.png"><img alt="../../_images/lbaas_instances.png" src="../../_images/lbaas_instances.png" style="width: 510.0px; height: 237.5px;" /></a>
</div></blockquote>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">SSH</span></tt> to server-1 and run following commands</p>
<blockquote>
<div><div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> sudo yum install httpd
<span class="gp">$</span> sudo systemctl <span class="nb">enable </span>httpd.service
<span class="gp">$</span> sudo systemctl start httpd.service
<span class="gp">$</span> sudo sh -c <span class="s2">&quot;echo server 1 &gt; /var/www/html/index.html&quot;</span>
<span class="gp">$</span> <span class="nb">exit</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">SSH</span></tt> to server-2 run following commands</p>
<blockquote>
<div><div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> sudo yum install httpd
<span class="gp">$</span> sudo systemctl <span class="nb">enable </span>httpd.service
<span class="gp">$</span> sudo systemctl start httpd.service
<span class="gp">$</span> sudo sh -c <span class="s2">&quot;echo server 2 &gt; /var/www/html/index.html&quot;</span>
<span class="gp">$</span> <span class="nb">exit</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">SSH</span></tt> to server-3 run following commands</p>
<blockquote>
<div><div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> sudo yum install httpd
<span class="gp">$</span> sudo systemctl <span class="nb">enable </span>httpd.service
<span class="gp">$</span> sudo systemctl start httpd.service
<span class="gp">$</span> sudo sh -c <span class="s2">&quot;echo server 3 &gt; /var/www/html/index.html&quot;</span>
<span class="gp">$</span> <span class="nb">exit</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Disassociate floating IPs of server-1, server-2 and server-3.</p>
</li>
</ol>
</div>
<div class="section" id="configure-load-balancer">
<h2>Configure Load balancer<a class="headerlink" href="#configure-load-balancer" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Navigate to <tt class="docutils literal"><span class="pre">Project</span> <span class="pre">&gt;</span> <span class="pre">Network</span> <span class="pre">&gt;</span> <span class="pre">Load</span> <span class="pre">Balancers</span></tt> tab in the left side</p>
</li>
<li><p class="first">In the pools tab click on add pool</p>
<a class="reference internal image-reference" href="../../_images/lbaas_add_pool.png"><img alt="../../_images/lbaas_add_pool.png" src="../../_images/lbaas_add_pool.png" style="width: 351.5px; height: 285.0px;" /></a>
<p>add pool and it should be active</p>
<a class="reference internal image-reference" href="../../_images/lbaas_pool.png"><img alt="../../_images/lbaas_pool.png" src="../../_images/lbaas_pool.png" style="width: 443.5px; height: 243.0px;" /></a>
</li>
<li><p class="first">Select Members tab and add member</p>
<a class="reference internal image-reference" href="../../_images/lbaas_add_member.png"><img alt="../../_images/lbaas_add_member.png" src="../../_images/lbaas_add_member.png" style="width: 326.0px; height: 273.0px;" /></a>
<p>Click “Add” and you should see all three members of your pool with Status ACTIVE</p>
<a class="reference internal image-reference" href="../../_images/lbaas_members.png"><img alt="../../_images/lbaas_members.png" src="../../_images/lbaas_members.png" style="width: 443.0px; height: 248.5px;" /></a>
</li>
<li><p class="first">Allocate an internal Virtual IP (VIP) address for the load balancer. Click on add VIP as shown in figure</p>
<a class="reference internal image-reference" href="../../_images/lbaas_add_vip.png"><img alt="../../_images/lbaas_add_vip.png" src="../../_images/lbaas_add_vip.png" style="width: 443.0px; height: 248.5px;" /></a>
<p>fill the details</p>
<a class="reference internal image-reference" href="../../_images/lbaas_add_vip_ip.png"><img alt="../../_images/lbaas_add_vip_ip.png" src="../../_images/lbaas_add_vip_ip.png" style="width: 288.5px; height: 298.0px;" /></a>
</li>
<li><p class="first">To access load balancer from outside we must assign floating ip address to it. Go to <tt class="docutils literal"><span class="pre">Project</span> <span class="pre">&gt;</span> <span class="pre">Compute</span> <span class="pre">&gt;</span> <span class="pre">Access</span> <span class="pre">and</span> <span class="pre">Security</span></tt> and assign Floating IP to load balancer.</p>
<a class="reference internal image-reference" href="../../_images/lbaas_allocate_floating_ip.png"><img alt="../../_images/lbaas_allocate_floating_ip.png" src="../../_images/lbaas_allocate_floating_ip.png" style="width: 448.5px; height: 225.0px;" /></a>
<p>then see that floating IP is mapped to your Load Balancer VIP</p>
<a class="reference internal image-reference" href="../../_images/lbaas_floating_ip_mapping.png"><img alt="../../_images/lbaas_floating_ip_mapping.png" src="../../_images/lbaas_floating_ip_mapping.png" style="width: 463.0px; height: 250.0px;" /></a>
<p>Now you can access your web server via ip address of load balancer.</p>
</li>
</ol>
</div>
<div class="section" id="add-a-health-monitor">
<h2>Add a Health Monitor<a class="headerlink" href="#add-a-health-monitor" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>An important feature of a load balancer is that it can determine if a server has failed and route traffic away from it. The OpenStack Neutron LBaaS supports this functionality by allowing you to define Monitors in the Monitor tab of the Load Balancer page. Select “Add Monitor” and then specify a monitor that you would like to add. For example, you can define a monitor that GETs a page every minute and if that fails twice, stop sending traffic to that instance:</p>
<a class="reference internal image-reference" href="../../_images/lbaas_health_monitor.png"><img alt="../../_images/lbaas_health_monitor.png" src="../../_images/lbaas_health_monitor.png" style="width: 336.5px; height: 311.0px;" /></a>
<p>Once a monitor is defined, you associate it with your pool via the “Associate Monitor” item in the menu to the left of your pool in the Pools tab. You now have a load balancer with back end instances that are being checked to ensure that they are operating propertly.</p>
<a class="reference internal image-reference" href="../../_images/lbaas_pool_monitor.png"><img alt="../../_images/lbaas_pool_monitor.png" src="../../_images/lbaas_pool_monitor.png" style="width: 451.0px; height: 250.0px;" /></a>
<p>and associate it</p>
<a class="reference internal image-reference" href="../../_images/lbaas_associate_monitor.png"><img alt="../../_images/lbaas_associate_monitor.png" src="../../_images/lbaas_associate_monitor.png" style="width: 420.5px; height: 177.0px;" /></a>
</div></blockquote>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="project3.html" class="btn btn-neutral float-right" title="Case 3: Unix Lab" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="project1.html" class="btn btn-neutral" title="Case 1: Virtical scale-up and scale-down VM resources" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Sunil J. Pawar.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'v0.01',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>